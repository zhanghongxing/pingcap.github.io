!function(e){function o(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,o),i.l=!0,i.exports}var t={};o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)},o.p="/js/",o(o.s=16)}({0:function(e,o,t){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.setCookies=o.getCookies=o.cookiesKeyMap=void 0;var n=t(1),i=function(e){return e&&e.__esModule?e:{default:e}}(n),a="_tidb_planet_",r=o.cookiesKeyMap={CONTRIBUTIONS_RANK:a+"contributions_rank",USERNAME:a+"username",DATE:a+"date",AVATAR:a+"avatar_url",CONTRIBUTIONS:a+"contributions",FIRST_ACCESS:a+"first_access"};o.getCookies=function(){var e={};for(var o in r){var t=i.default.get(r[o]);e[o]=t}return e},o.setCookies=function(e,o){i.default.set(r[e],o)}},1:function(e,o,t){"use strict";var n,i,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(r){var s=!1;if(n=r,void 0!==(i="function"==typeof n?n.call(o,t,o,e):n)&&(e.exports=i),s=!0,"object"===a(o)&&(e.exports=r(),s=!0),!s){var c=window.Cookies,l=window.Cookies=r();l.noConflict=function(){return window.Cookies=c,l}}}(function(){function e(){for(var e=0,o={};e<arguments.length;e++){var t=arguments[e];for(var n in t)o[n]=t[n]}return o}function o(t){function n(o,i,a){var r;if("undefined"!=typeof document){if(arguments.length>1){if(a=e({path:"/"},n.defaults,a),"number"==typeof a.expires){var s=new Date;s.setMilliseconds(s.getMilliseconds()+864e5*a.expires),a.expires=s}a.expires=a.expires?a.expires.toUTCString():"";try{r=JSON.stringify(i),/^[\{\[]/.test(r)&&(i=r)}catch(e){}i=t.write?t.write(i,o):encodeURIComponent(String(i)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),o=encodeURIComponent(String(o)),o=o.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),o=o.replace(/[\(\)]/g,escape);var c="";for(var l in a)a[l]&&(c+="; "+l,!0!==a[l]&&(c+="="+a[l]));return document.cookie=o+"="+i+c}o||(r={});for(var u=document.cookie?document.cookie.split("; "):[],d=/(%[0-9A-Z]{2})+/g,p=0;p<u.length;p++){var f=u[p].split("="),v=f.slice(1).join("=");this.json||'"'!==v.charAt(0)||(v=v.slice(1,-1));try{var m=f[0].replace(d,decodeURIComponent);if(v=t.read?t.read(v,m):t(v,m)||v.replace(d,decodeURIComponent),this.json)try{v=JSON.parse(v)}catch(e){}if(o===m){r=v;break}o||(r[m]=v)}catch(e){}}return r}}return n.set=n,n.get=function(e){return n.call(n,e)},n.getJSON=function(){return n.apply({json:!0},[].slice.call(arguments))},n.defaults={},n.remove=function(o,t){n(o,"",e(t,{expires:-1}))},n.withConverter=o,n}return o(function(){})})},16:function(e,o,t){e.exports=t(17)},17:function(e,o,t){"use strict";var n=t(0);$.ajax({url:"https://pingcap.com/api/contributors",crossDomain:!0,success:function(e){window.tidbContributors=e.data,e.data&&($(".j-amount").text(e.data.length),$(".j-show").show())}});var i=function(e){return/^[a-z\d](?:[a-z\d]|-(?=[a-z\d])){0,38}$/i.test(e)},a=function(e){var o=window.tidbContributors.findIndex(function(o){return o.login===e});if(o>-1){var t=window.tidbContributors[o];(0,n.setCookies)("CONTRIBUTIONS_RANK",o+1),(0,n.setCookies)("DATE",t.date),(0,n.setCookies)("CONTRIBUTIONS",t.contributions),(0,n.setCookies)("AVATAR",t.avatar_url)}else console.log("Welcome to the TiDB planet, join us now! www.pingcap.com")},r=function(){return!(0,n.getCookies)().FIRST_ACCESS},s=function(){$(".input-container .inner").removeClass("error"),$(".input-container .inner").remove(),$(".form__input").val(null)},c=function(){$(".j-login-overlay").fadeIn(),$(".j-login-overlay, .modal").addClass("active")},l=function(){$(".j-login-overlay").fadeOut(),$(".j-login-overlay, .modal").removeClass("active"),s()},u=function(){$(".j-video-overlay").fadeIn(),$(".j-video-overlay, .modal").addClass("active");var e=document.querySelector("video").play();void 0!==e&&e.catch(function(e){console.log("Auto-play was prevented by browser")}).then(function(){}),m()},d=function(){$(".j-video-overlay").fadeOut(),$(".j-video-overlay, .modal").removeClass("active")},p=function(){function e(e,o){return Math.floor(Math.random()*(e-o+1)*10+o)}for(var o=document.getElementById("meteors"),t=document.getElementsByClassName("meteor"),n=0;n<2;n++){var i=document.createElement("div");i.className="meteor",i.style.top=e(60,-30)+"px",i.style.left=e(150,20)+"px",o.appendChild(i)}for(var a=0,r=t.length;a<r;a++)t[a].style.animationDelay=a%6==0?"0s":.8*a+"s"},f=function(e){var o='  <div class="list__item">    <div class="github-avatar">      <img src="'+e.avatar_url+'" width="36px" height="36px"/>    </div>    <div class="contributor-info">      <div class="contributor-name"><a href="https://github.com/'+e.login+'" target="_blank">'+e.login+'</a></div>      <div class="contribution-degree" data-degree="'+function(e){return e>=0&&e<=5?1:e>=6&&e<=10?2:e>=11&&e<=20?3:4}(e.contributions)+'">        <span class="dot dot-1"></span>        <span class="dot dot-2"></span>        <span class="dot dot-3"></span>        <span class="dot dot-4"></span>      </div>    </div>  </div> ';$("#contributors").append(o)},v=function(e){var o=window.tidbContributors;o.sort(function(e,o){var t=e.login.toUpperCase(),n=o.login.toUpperCase();return t<n?-1:t>n?1:0});var t=_.floor(o.length/5),n=[];o.forEach(function(o,i){e<4?i>=e*t&&i<(e+1)*t&&n.push(o):i>=e*t&&n.push(o)}),n.forEach(function(e){f(e)})},m=function(){document.addEventListener("WeixinJSBridgeReady",function(){$("#video")[0].play()})},g=function(){var e=$(".modal-overlay.active").data("type");$(".modal-overlay").fadeOut(),$(".modal-overlay, .modal").removeClass("active"),"login"===e&&s(),"video"===e&&$("#video")[0].pause(),"contributors"===e&&$("#contributors").html(""),"capture"===e&&$(".html2image-container").removeClass("show")};$(function(){$("body").hasClass("welcome-page")&&!r()&&$("body").append('<div class="guide-again scale-in-center">Click these elements and explore the planet again!</div>'),(0,n.getCookies)().USERNAME||($(".j-login").show(),$("body").hasClass("welcome-page")&&r()&&((0,n.setCookies)("FIRST_ACCESS","-1"),$("body").append('<div class="mask j-mask"></div>'))),$("body").hasClass("milestones-page")&&u(),$("body")[0].offsetWidth>768&&($(".nav").fadeIn(),$(".j-forward").addClass("animation-forward_arrow")),setTimeout(function(){$(".j-fadeOutSlowly").fadeOut("slow")},5e3),$("#video").on("ended",function(){console.log("Video has ended!"),d()}),$(".close-modal").off("click").on("click",function(e){g(),e.preventDefault(),e.stopPropagation()}),$(".modal-overlay").on("click",function(e){$(this).hasClass("active")&&_.isEqual(e.target,e.delegateTarget)&&g()}),$(".j-login").on("click",function(e){c(),e.preventDefault(),e.stopPropagation()}),$(".j-later").on("click",function(e){l(),e.preventDefault(),e.stopPropagation()}),$(".j-open-dorm").off("click").on("click",function(e){var o=$(this).data("index");v(o),$(".j-contributors-overlay").fadeIn(),$(".j-contributors-overlay, .modal").addClass("active"),e.preventDefault(),e.stopPropagation()}),$(".j-video-btn").on("click",function(e){u(),e.preventDefault(),e.stopPropagation()}),$(".j-popup").on("click",function(e){$(".popup").fadeOut(),e.preventDefault(),e.stopPropagation()}),$(".j-open-popup").on("click",function(e){$(".popup").fadeIn(),e.preventDefault(),e.stopPropagation()}),$(".j-readmore").on("click",function(e){window.open($(this).attr("href")),e.preventDefault(),e.stopPropagation()}),$(".form__input").blur(function(){i($(this).val())||$(".error").length||($(".input-container").append('<span class="inner" >Please enter a valid username.</span>'),setTimeout(function(){$(".input-container .inner").addClass("error")},100))}),$(".form__input").focus(function(){$(".input-container .inner").removeClass("error"),$(".input-container .inner").remove()}),$(".form").submit(function(e){$(".form__input").blur();var o=$(".form__input").val();i(o)&&($(".modal-login").addClass("landing"),a(o),(0,n.setCookies)("USERNAME",o),setTimeout(function(){location.href="/tidb-planet/user/"},2e3)),e.preventDefault()}),p()})}});